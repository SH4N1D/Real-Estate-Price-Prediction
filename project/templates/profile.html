<!-- filepath: c:\Users\shani\Desktop\ACADEMY\PG\Mini project\re project\project\templates\profile.html -->
<!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
</head>
{% if messages %}
    <script>
        {% for message in messages %}
            alert("{{ message|escapejs }}");
        {% endfor %}
    </script>
{% endif %}
<body>
    <h2>User Profile</h2>
    <div>
        <img src="{{ user.image.url }}" alt="Profile Image" width="120" height="120"><br>
        <strong>Name:</strong> {{ user.fname }} {{ user.lname }}<br>
        <strong>Username:</strong> {{ user.username }}<br>
        <strong>Email:</strong> {{ user.email }}<br>
        <strong>Phone:</strong> {{ user.phone }}<br>
        <strong>Place:</strong> {{ user.place }}<br>
    </div><br>
     <a href="{% url 'dashboard' %}">Back to Dashboard</a>
    <a href="{% url 'logout' %}">Logout</a>
    <hr>
    <h3>Your Properties</h3>
    <form method="get" action="{% url 'profile_search' %}">
    <input type="text" name="q" placeholder="Search by name, street, description" value="{{ query|default:'' }}">
    <input type="text" name="area" placeholder="Area" value="{{ area|default:'' }}">
    <input type="number" name="min_price" placeholder="Min Price" value="{{ min_price|default:'' }}">
    <input type="number" name="max_price" placeholder="Max Price" value="{{ max_price|default:'' }}">
    <button type="submit">Search</button>
</form>
    {% if properties %}
        <table border="1">
            <tr>
                <th>Property Name</th>
                <th>Street</th>
                <th>Area</th>
                <th>Bedrooms</th>
                <th>Bathrooms</th>
                <th>Price</th>
                <th>Image 1</th>
                <th>Image 2</th>
                <th>Image 3</th>
                <th>Image 4</th>
                <th>Action</th>
            </tr>
            {% for property in properties %}
            <tr>
                <td>{{ property.property_name }}</td>
                <td>{{ property.street }}</td>
                <td>{{ property.area }}</td>
                <td>{{ property.bed }}</td>
                <td>{{ property.bath }}</td>
                <td>{{ property.price }}</td>
                <td><img src="{{ property.image1.url }}" width="80"></td>
                <td><img src="{{ property.image2.url }}" width="80"></td>
                <td><img src="{{ property.image3.url }}" width="80"></td>
                <td><img src="{{ property.image4.url }}" width="80"></td>
                <td>
                <form method="post" action="{% url 'delete_property' property.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" onclick="return confirm('Are you sure you want to delete this property?');">Delete</button>
                </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No properties found.</p>
    {% endif %}
    <br>
   
</body>
</html>