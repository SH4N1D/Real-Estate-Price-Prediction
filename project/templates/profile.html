{% extends 'base.html' %}

{% comment %} <!DOCTYPE html>
<html>
<head>
    <title>User Profile</title>
</head>
{% if messages %}
    <script>
        {% for message in messages %}
            alert("{{ message|escapejs }}");
        {% endfor %}
    </script>
{% endif %}
<body>
    <h2>User Profile</h2>
    <div>
        <img src="{{ user.image.url }}" alt="Profile Image" width="120" height="120"><br>
        <strong>Name:</strong> {{ user.fname }} {{ user.lname }}<br>
        <strong>Username:</strong> {{ user.username }}<br>
        <strong>Email:</strong> {{ user.email }}<br>
        <strong>Phone:</strong> {{ user.phone }}<br>
        <strong>Place:</strong> {{ user.place }}<br>
    </div><br>
     <a href="{% url 'dashboard' %}">Back to Dashboard</a>
    <a href="{% url 'logout' %}">Logout</a>
    <hr>
    <h3>Your Properties</h3>
    <form method="get" action="{% url 'profile_search' %}">
    <input type="text" name="q" placeholder="Search by name, street, description" value="{{ query|default:'' }}">
    <input type="text" name="area" placeholder="Area" value="{{ area|default:'' }}">
    <input type="number" name="min_price" placeholder="Min Price" value="{{ min_price|default:'' }}">
    <input type="number" name="max_price" placeholder="Max Price" value="{{ max_price|default:'' }}">
    <button type="submit">Search</button>
</form>
    {% if properties %}
        <table border="1">
            <tr>
                <th>Property Name</th>
                <th>Street</th>
                <th>Area</th>
                <th>Bedrooms</th>
                <th>Bathrooms</th>
                <th>Price</th>
                <th>Image 1</th>
                <th>Image 2</th>
                <th>Image 3</th>
                <th>Image 4</th>
                <th>Action</th>
            </tr>
            {% for property in properties %}
            <tr>
                <td>{{ property.property_name }}</td>
                <td>{{ property.street }}</td>
                <td>{{ property.area }}</td>
                <td>{{ property.bed }}</td>
                <td>{{ property.bath }}</td>
                <td>{{ property.price }}</td>
                <td><img src="{{ property.image1.url }}" width="80"></td>
                <td><img src="{{ property.image2.url }}" width="80"></td>
                <td><img src="{{ property.image3.url }}" width="80"></td>
                <td><img src="{{ property.image4.url }}" width="80"></td>
                <td>
                <form method="post" action="{% url 'delete_property' property.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" onclick="return confirm('Are you sure you want to delete this property?');">Delete</button>
                </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No properties found.</p>
    {% endif %}
    <br>
   
</body>
</html> {% endcomment %}




{% load static %}

{% block title %}User Profile{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}
    {% if messages %}
        <script>
            {% for message in messages %}
                alert("{{ message|escapejs }}");
            {% endfor %}
        </script>
    {% endif %}

    <div class="profile-page-container" data-aos="fade-up">

        <div class="neumorphic-card profile-info-card">
            <h1 class="gradient-text">User Profile</h1>
            <div class="user-details-row">
                <div class="user-image-container">
                    <img src="{{ user.image.url }}" alt="Profile Image" class="user-image">
                </div>
                <div class="user-details-grid">
                    <p><i class="fa-solid fa-user property-icon"></i> <strong>Name:</strong></p>
                    <p>{{ user.fname }} {{ user.lname }}</p>
                    <p><i class="fa-solid fa-id-card property-icon"></i> <strong>Username:</strong></p>
                    <p>{{ user.username }}</p>
                    <p><i class="fa-solid fa-envelope property-icon"></i> <strong>Email:</strong></p>
                    <p>{{ user.email }}</p>
                    <p><i class="fa-solid fa-phone property-icon"></i> <strong>Phone:</strong></p>
                    <p>{{ user.phone }}</p>
                    <p><i class="fa-solid fa-city property-icon"></i> <strong>Place:</strong></p>
                    <p>{{ user.place }}</p>
                </div>
            </div>
            <div class="profile-nav-links">
                <a href="{% url 'logout' %}" class="neumorphic-button logout-button">Logout</a>
            </div>
        </div>

        <div class="neumorphic-card search-form-card" data-aos="fade-up" data-aos-delay="200">
            <h2 class="gradient-text">Your Properties</h2>
            <form method="get" action="{% url 'profile_search' %}" class="neumorphic-form">
                <div class="search-form-grid">
                    <input type="text" name="q" placeholder="Name, street, description" value="{{ query|default:'' }}" class="neumorphic-input">
                    <input type="text" name="area" placeholder="Area" value="{{ area|default:'' }}" class="neumorphic-input">
                    <input type="number" name="min_price" placeholder="Min Price" value="{{ min_price|default:'' }}" class="neumorphic-input">
                    <input type="number" name="max_price" placeholder="Max Price" value="{{ max_price|default:'' }}" class="neumorphic-input">
                    <input type="number" name="bedrooms" placeholder="Bedrooms" value="{{ bedrooms|default:'' }}" class="neumorphic-input">
                    <input type="number" name="bathrooms" placeholder="Bathrooms" value="{{ bathrooms|default:'' }}" class="neumorphic-input">
                    <button type="submit" class="neumorphic-button search-button">Search</button>
                </div>
            </form>
        </div>

        <div class="neumorphic-card property-list-card" data-aos="fade-up" data-aos-delay="400">
            {% if properties %}
                <div class="properties-grid">
                    {% for property in properties %}
                        <div class="property-card" data-aos="zoom-in">
                            <img src="{{ property.image1.url }}" alt="Property Image" class="card-image">
                            <div class="card-content">
                                <h3 class="card-title">{{ property.property_name }}</h3>
                                <p><i class="fa-solid fa-location-dot property-icon"></i> Street: {{ property.street }}</p>
                                <p><i class="fa-solid fa-square-full property-icon"></i> Area: {{ property.area }}</p>
                                <p><i class="fa-solid fa-bed property-icon"></i> Bedrooms: {{ property.bed }}</p>
                                <p><i class="fa-solid fa-bath property-icon"></i> Bathrooms: {{ property.bath }}</p>
                                <p><i class="fa-solid fa-indian-rupee-sign property-icon"></i> Price: ${{ property.price }}</p>
                                <form method="post" action="{% url 'delete_property' property.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" class="neumorphic-button delete-button" onclick="return confirm('Are you sure you want to delete this property?');">Delete</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>No properties found.</p>
            {% endif %}
        </div>
    </div>
{% endblock %}